{"version":3,"sources":["../../../../assets/script/assets/script/itemList.js"],"names":["common","require","Item","cc","Class","name","properties","id","imageSprite","SpriteFrame","extends","Component","items","default","type","canvasNode","Node","largeThingPrefab","Prefab","largeThingPanelPrefab","smallThingPrefab","smallThingPanelPrefab","itemPrefab","contentNode","scrollView","hairContentNode","femaleHairContentNode","legContentNode","faceContentNode","femaleFaceContentNode","maskContentNode","bodyContentNode","furnitureContentNode","smallFurnitureContentNode","defaultBodyContentNode","agengtingContentNode","initContentBase","path","node","spacing","touchFunc","thingType","self","view","parent","loadingContent","loadingBall","countryNode","children","length","getChildByName","rotateAction","repeatForever","rotateBy","active","runAction","loader","loadResDir","err","height","i","item","instantiate","addChild","getComponent","init","on","initDefaultBody","selectBody","initBaxi","initAgengting","initDeguo","initFaguo","initKeluodiya","initXibanya","initBilishi","initPutaoya","onLoad","selectHair","selectLeg","selectFace","selectMask","selectFurniture","selectNode","Sprite","spriteFrame","prevMask","e","itemListScript","find","targetSpriteFrame","target","stageNode","thingStageNode","newFurnitrue","setPosition","width","random0To1","setScale","indexOf","setLocalZOrder","thingZOrder","personZOrder","EventType","TOUCH_START","initScale","currentTarget","scaleX","scale","dispatchEvent","Event","EventCustom","TOUCH_MOVE","delta","touch","getDelta","x","y","TOUCH_END","TOUCH_CANCEL","stopPropagation","rootNodeName","_parent","maxScale","minScale","scaleRate","getStartLocation","getLocation","scaleY","scaleBtn","closeBtn","result","destroy"],"mappings":"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","file":"itemList.js","sourceRoot":"../../../../assets/script","sourcesContent":["const common = require('./common');\n// 拿数据的 ItemList\nvar Item = cc.Class({\n    name: 'Item',\n    properties: {\n        id: 0,\n        imageSprite: cc.SpriteFrame\n    }\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        items: {\n            default: [],\n            type: Item\n        },\n        canvasNode: cc.Node,\n        largeThingPrefab: cc.Prefab,\n        largeThingPanelPrefab: cc.Prefab,\n        smallThingPrefab: cc.Prefab,\n        smallThingPanelPrefab: cc.Prefab,\n        itemPrefab: cc.Prefab,\n        contentNode: cc.Node,\n        scrollView: cc.Node,\n        hairContentNode: cc.Node,\n        femaleHairContentNode: cc.Node,\n        legContentNode: cc.Node,\n        faceContentNode: cc.Node,\n        femaleFaceContentNode: cc.Node,\n        maskContentNode: cc.Node,\n        bodyContentNode: cc.Node,\n        furnitureContentNode: cc.Node,\n        smallFurnitureContentNode: cc.Node,\n        defaultBodyContentNode: cc.Node,\n\n        agengtingContentNode: cc.Node,\n        defaultBodyContentNode: cc.Node,\n        bilishiContentNode: cc.Node,\n        baxiContentNode: cc.Node,\n        deguoContentNode: cc.Node,\n        faguoContentNode: cc.Node,\n        wulaguiContentNode: cc.Node,\n        putaoyaContentNode: cc.Node,\n        keluodiyaContentNode: cc.Node,\n        xibanyaContentNode: cc.Node,\n        spacing: 0\n    },\n\n    initContentBase(path, node, spacing, touchFunc, thingType) {\n        var self = this;\n\n        let view = this[node].parent,\n            loadingContent,\n            loadingBall,\n            countryNode;\n\n        // 显示loading动画\n        if (view.children.length > 1) {\n            loadingContent = view.getChildByName('loading');\n            loadingBall = loadingContent.getChildByName('loadingBall');\n            countryNode = this[node].getChildByName('country');\n\n            let rotateAction = cc.repeatForever(cc.rotateBy(1, 360));\n            loadingContent.active = true;\n            this[node].active = false;\n            countryNode.active = false;\n            loadingBall.runAction(rotateAction);\n        }\n\n        cc.loader.loadResDir(path, cc.SpriteFrame, function (err, SpriteFrame) {\n            self[node].height = SpriteFrame.length * (spacing + self.spacing) + self.spacing;\n            for (let i = 0; i < SpriteFrame.length; i++) {\n                let item;\n                if (thingType && thingType === 'large') {\n                    item = cc.instantiate(self.largeThingPanelPrefab);\n                } else if (thingType && thingType === 'small') {\n                    item = cc.instantiate(self.smallThingPanelPrefab);\n                } else {\n                    item = cc.instantiate(self.itemPrefab);\n                }\n                self[node].addChild(item);\n                item.getComponent('itemTemplate').init({\n                    id: i + 1,\n                    imageSprite: SpriteFrame[i]\n                });\n\n                item.on('touchend', touchFunc)\n            }\n\n            // 隐藏Loading动画\n            if (loadingBall) {\n                loadingContent.active = false;\n                self[node].active = true;\n                countryNode.active = true;\n            }\n        })\n    },\n\n    initDefaultBody() {\n        this.initContentBase('image/team-clothes/default', 'defaultBodyContentNode', 65, this.selectBody);\n    },\n\n    initBaxi() {\n        this.initContentBase('image/team-clothes/baxi', 'baxiContentNode', 65, this.selectBody);\n    },\n\n    initAgengting() {\n        this.initContentBase('image/team-clothes/agengting', 'agengtingContentNode', 65, this.selectBody);\n    },\n\n    initDeguo() {\n        this.initContentBase('image/team-clothes/deguo', 'deguoContentNode', 65, this.selectBody);\n    },\n\n    initFaguo() {\n        this.initContentBase('image/team-clothes/faguo', 'faguoContentNode', 65, this.selectBody);\n    },\n\n    initKeluodiya() {\n        this.initContentBase('image/team-clothes/keluodiya', 'keluodiyaContentNode', 65, this.selectBody);\n    },\n\n    initXibanya() {\n        this.initContentBase('image/team-clothes/xibanya', 'xibanyaContentNode', 65, this.selectBody);\n    },\n\n    initBilishi() {\n        this.initContentBase('image/team-clothes/bilishi', 'bilishiContentNode', 65, this.selectBody);\n    },\n\n    initPutaoya() {\n        this.initContentBase('image/team-clothes/putaoya', 'putaoyaContentNode', 65, this.selectBody);\n    },\n\n\n    onLoad() {\n        this.initContentBase('image/male/hair', 'hairContentNode', 70, this.selectHair);\n        this.initContentBase('image/female/hair', 'femaleHairContentNode', 62, this.selectHair);\n        this.initContentBase('image/leg', 'legContentNode', 60, this.selectLeg);\n        this.initContentBase('image/male/face', 'faceContentNode', 52, this.selectFace);\n        this.initContentBase('image/female/face', 'femaleFaceContentNode', 52, this.selectFace);\n        this.initContentBase('image/mask', 'maskContentNode', 45, this.selectMask);\n\n        this.initContentBase('image/large-things', 'furnitureContentNode', 72, this.selectFurniture, 'large');\n        this.initContentBase('image/small-things', 'smallFurnitureContentNode', 64, this.selectFurniture, 'small');\n    },\n\n    selectLeg() {\n        if (!common.selectNode) return false;\n        common.selectNode.getChildByName('leg').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    selectBody() {\n        if (!common.selectNode) return false;\n        common.selectNode.getChildByName('body').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    selectFace() {\n        if (!common.selectNode) return false;\n        common.selectNode.getChildByName('face').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    selectHair() {\n        if (!common.selectNode) return false;\n        common.selectNode.getChildByName('hair').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    selectMask() {\n        if (!common.selectNode) return false;\n        let selectMask = this.getComponent(cc.Sprite).spriteFrame,\n            prevMask = common.selectNode.getChildByName('mask').getComponent(cc.Sprite).spriteFrame;\n        if (selectMask === prevMask) {\n            common.selectNode.getChildByName('mask').getComponent(cc.Sprite).spriteFrame = null;\n        } else {\n            common.selectNode.getChildByName('mask').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n        }\n    },\n\n    selectBody() {\n        if (!common.selectNode) return false;\n        common.selectNode.getChildByName('body').getComponent(cc.Sprite).spriteFrame = this.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    selectFurniture(e) {\n        let itemListScript = cc.find('Canvas/itemList').getComponent('itemList');\n        let targetSpriteFrame = e.target.getComponent(cc.Sprite).spriteFrame;\n\n        let canvasNode = cc.find('Canvas'),\n            stageNode = cc.find('Canvas/personSatge'),\n            thingStageNode = cc.find('Canvas/thingStage'),\n            newFurnitrue;\n\n        if (e.target.name === 'smallThingPanelPrefab') {\n            newFurnitrue = cc.instantiate(itemListScript.smallThingPrefab);\n        } else {\n            newFurnitrue = cc.instantiate(itemListScript.largeThingPrefab);\n        }\n        newFurnitrue.setPosition(canvasNode.width / 30 + cc.random0To1() * 40 - 20, canvasNode.height / 10 + cc.random0To1() * 40 - 10);\n        newFurnitrue.getComponent(cc.Sprite).spriteFrame = targetSpriteFrame;\n        // 控制尺寸\n        if (e.target.name === 'smallThingPanelPrefab') {\n            newFurnitrue.setScale(0.5);\n        } else {\n            newFurnitrue.setScale(0.5);\n        }\n\n        // 放置的位置 (窗户, 洞，挂画)\n        if (targetSpriteFrame.name.indexOf('-back') > 0) {\n            newFurnitrue.setLocalZOrder(++common.thingZOrder);\n            thingStageNode.addChild(newFurnitrue);\n        } else {\n            newFurnitrue.setLocalZOrder(++common.personZOrder);\n            stageNode.addChild(newFurnitrue);\n        }\n\n\n        newFurnitrue.getChildByName('frame').active = true;\n        newFurnitrue.on(cc.Node.EventType.TOUCH_START, function (e) {\n            newFurnitrue.setLocalZOrder(++common.personZOrder);\n            newFurnitrue.initScale = e.currentTarget.scaleX;\n            var scale = newFurnitrue.initScale + 0.05;\n            newFurnitrue.setScale(scale);\n            newFurnitrue.dispatchEvent(new cc.Event.EventCustom('selectNode', true));\n            newFurnitrue.getChildByName('frame').active = true;\n\n        }, this)\n\n        newFurnitrue.on(cc.Node.EventType.TOUCH_MOVE, function (e) {\n            if (e.target === 'scale-btn') {\n                return false;\n            }\n            let delta = e.touch.getDelta();\n            this.x += delta.x;\n            this.y += delta.y;\n        }, this.node)\n\n        newFurnitrue.on(cc.Node.EventType.TOUCH_END, function (e) {\n            newFurnitrue.setScale(newFurnitrue.initScale);\n        }, this)\n\n        newFurnitrue.on(cc.Node.EventType.TOUCH_CANCEL, function (e) {\n            this.node.setScale(newFurnitrue.initScale);\n        }, this)\n\n        // scale event\n        newFurnitrue.getChildByName('frame').getChildByName('scale-btn').on(cc.Node.EventType.TOUCH_START, function (e) {\n            e.stopPropagation();\n        }, this.node)\n\n        newFurnitrue.getChildByName('frame').getChildByName('scale-btn').on(cc.Node.EventType.TOUCH_MOVE, function (e) {\n            e.stopPropagation();\n            let rootNodeName = e.target._parent._parent,\n                maxScale, minScale;\n            let scaleRate = (1 - e.getStartLocation().y + e.getLocation().y) / 5000;\n            newFurnitrue.initScale = scaleRate + newFurnitrue.scaleY;\n\n            // 大物品 和小物品 的最大尺寸和最小尺寸不一样\n            if (rootNodeName.name === 'smallThing') {\n                maxScale = 1;\n                minScale = 0.3;\n            } else {\n                maxScale = 1;\n                minScale = 0.3;\n            }\n            newFurnitrue.initScale = newFurnitrue.initScale < minScale ? minScale : newFurnitrue.initScale;\n            // newFurnitrue.initScale = newFurnitrue.initScale > maxScale ? maxScale : newFurnitrue.initScale;\n            newFurnitrue.setScale(newFurnitrue.initScale);\n\n            // 按钮缩放\n            let scaleBtn = newFurnitrue.getChildByName('frame').getChildByName('scale-btn');\n            let closeBtn = newFurnitrue.getChildByName('frame').getChildByName('close-btn');\n\n            let result = scaleBtn.scaleY * (1 - scaleRate / newFurnitrue.initScale);\n            if (result < 1) {\n                result = 1;\n            } else if (result > 1.5) {\n                result = 1.5;\n            }\n            // cc.log(result);\n\n            scaleBtn.setScale(result);\n            closeBtn.setScale(result);\n\n        }, this)\n\n        newFurnitrue.getChildByName('frame').getChildByName('scale-btn').on(cc.Node.EventType.TOUCH_END, function (e) {\n            e.stopPropagation();\n        }, this)\n\n        newFurnitrue.getChildByName('frame').getChildByName('scale-btn').on(cc.Node.EventType.TOUCH_CANCEL, function (e) {\n            e.stopPropagation();\n        }, this)\n\n        newFurnitrue.getChildByName('frame').getChildByName('close-btn').on(cc.Node.EventType.TOUCH_END, function (e) {\n            e.stopPropagation();\n            newFurnitrue.destroy();\n        }, this)\n\n        newFurnitrue.dispatchEvent(new cc.Event.EventCustom('selectNode', true));\n    },\n\n});\n"]}