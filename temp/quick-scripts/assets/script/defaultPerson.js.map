{"version":3,"sources":["defaultPerson.js"],"names":["common","require","cc","Class","extends","Component","properties","closeBtn","Node","scaleBtn","frameNode","initScale","default","type","Float","scaleRadio","Integer","minScale","maxScale","handleRootNodeClick","active","node","dispatchEvent","Event","EventCustom","handleRemoveRootNode","defaultMaleContent","find","scrollView","hideAllContent","unSelectorXIcon","selectDefaultMan","hideYpanel","getComponent","ScrollView","content","destroy","onLoad","on","EventType","TOUCH_START","e","setLocalZOrder","personZOrder","currentTarget","scaleX","scale","setScale","TOUCH_MOVE","target","delta","touch","getDelta","x","y","TOUCH_END","TOUCH_CANCEL","stopPropagation","scaleRate","getStartLocation","getLocation","update","dt"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,UAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL;AAERC,kBAAUP,GAAGM,IAFL;AAGRE,mBAAWR,GAAGM,IAHN;AAIRG,mBAAW;AACPC,qBAAS,CADF;AAEPC,kBAAMX,GAAGY;AAFF,SAJH;AAQRC,oBAAY;AACRH,qBAAS,IADD;AAERC,kBAAMX,GAAGc;AAFD,SARJ;AAYRC,kBAAU;AACNL,qBAAS,GADH;AAENC,kBAAMX,GAAGY;AAFH,SAZF;AAgBRI,kBAAU;AACNN,qBAAS,GADH;AAENC,kBAAMX,GAAGY;AAFH;AAhBF,KAHP;;AAyBL;AACAK,yBAAqB,+BAAY;AAC7B,aAAKT,SAAL,CAAeU,MAAf,GAAwB,IAAxB;AACA,aAAKC,IAAL,CAAUC,aAAV,CAAwB,IAAIpB,GAAGqB,KAAH,CAASC,WAAb,CAAyB,YAAzB,EAAuC,IAAvC,CAAxB;AACH,KA7BI;;AA+BL;AACAC,0BAAsB,gCAAY;AAC9B,YAAIC,qBAAqBxB,GAAGyB,IAAH,CAAQ,2CAAR,CAAzB;AAAA,YACIC,aAAa1B,GAAGyB,IAAH,CAAQ,yBAAR,CADjB;AAEA3B,eAAO6B,cAAP;AACA7B,eAAO8B,eAAP;AACA9B,eAAO+B,gBAAP;AACA/B,eAAOgC,UAAP;AACAN,2BAAmBN,MAAnB,GAA4B,IAA5B;AACAQ,mBAAWK,YAAX,CAAwB/B,GAAGgC,UAA3B,EAAuCC,OAAvC,GAAiDT,kBAAjD;AACA,aAAKL,IAAL,CAAUe,OAAV;AACH,KA1CI;;AA4CLC,UA5CK,oBA4CI;AACL,aAAK3B,SAAL,CAAeU,MAAf,GAAwB,KAAxB;;AAEA;AACA,aAAKC,IAAL,CAAUiB,EAAV,CAAapC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBC,WAA/B,EAA4C,UAAUC,CAAV,EAAa;AACrD,iBAAKpB,IAAL,CAAUqB,cAAV,CAAyB,EAAE1C,OAAO2C,YAAlC;AACA,iBAAKhC,SAAL,GAAiB8B,EAAEG,aAAF,CAAgBC,MAAjC;AACA,gBAAIC,QAAQ,KAAKnC,SAAL,GAAiB,IAA7B;AACA,iBAAKU,IAAL,CAAU0B,QAAV,CAAmBD,KAAnB;AACA,iBAAK3B,mBAAL;AACH,SAND,EAMG,IANH;;AAQA,aAAKE,IAAL,CAAUiB,EAAV,CAAapC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBS,UAA/B,EAA2C,UAAUP,CAAV,EAAa;AACpD,gBAAIA,EAAEQ,MAAF,KAAa,WAAjB,EAA8B;AAC1B,uBAAO,KAAP;AACH;AACD,gBAAIC,QAAQT,EAAEU,KAAF,CAAQC,QAAR,EAAZ;AACA,iBAAKC,CAAL,IAAUH,MAAMG,CAAhB;AACA,iBAAKC,CAAL,IAAUJ,MAAMI,CAAhB;AACH,SAPD,EAOG,KAAKjC,IAPR;;AASA,aAAKA,IAAL,CAAUiB,EAAV,CAAapC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBgB,SAA/B,EAA0C,UAAUd,CAAV,EAAa;AACnD,iBAAKpB,IAAL,CAAU0B,QAAV,CAAmB,KAAKpC,SAAxB;AACH,SAFD,EAEG,IAFH;;AAIA,aAAKU,IAAL,CAAUiB,EAAV,CAAapC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBiB,YAA/B,EAA6C,UAAUf,CAAV,EAAa;AACtD,iBAAKpB,IAAL,CAAU0B,QAAV,CAAmB,KAAKpC,SAAxB;AACH,SAFD,EAEG,IAFH;;AAIA;AACA,aAAKF,QAAL,CAAc6B,EAAd,CAAiBpC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBC,WAAnC,EAAgD,UAAUC,CAAV,EAAa;AACzDA,cAAEgB,eAAF;AACH,SAFD,EAEG,KAAKpC,IAFR;;AAIA,aAAKZ,QAAL,CAAc6B,EAAd,CAAiBpC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBS,UAAnC,EAA+C,UAAUP,CAAV,EAAa;AACxDA,cAAEgB,eAAF;AACA,gBAAIC,YAAY,CAAC,IAAIjB,EAAEkB,gBAAF,GAAqBL,CAAzB,GAA6Bb,EAAEmB,WAAF,GAAgBN,CAA9C,IAAmD,KAAKvC,UAAxE;AACA,iBAAKJ,SAAL,GAAiB+C,YAAY,KAAK/C,SAAlC;AACA,iBAAKA,SAAL,GAAiB,KAAKA,SAAL,GAAiB,KAAKM,QAAtB,GAAiC,KAAKA,QAAtC,GAAiD,KAAKN,SAAvE;AACA;AACA,iBAAKU,IAAL,CAAU0B,QAAV,CAAmB,KAAKpC,SAAxB;AACH,SAPD,EAOG,IAPH;;AASA,aAAKF,QAAL,CAAc6B,EAAd,CAAiBpC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBgB,SAAnC,EAA8C,UAAUd,CAAV,EAAa;AACvDA,cAAEgB,eAAF;AACH,SAFD,EAEG,IAFH;;AAIA,aAAKhD,QAAL,CAAc6B,EAAd,CAAiBpC,GAAGM,IAAH,CAAQ+B,SAAR,CAAkBiB,YAAnC,EAAiD,UAAUf,CAAV,EAAa;AAC1DA,cAAEgB,eAAF;AACH,SAFD,EAEG,IAFH;AAGH,KA9FI;AAgGLI,UAhGK,kBAgGEC,EAhGF,EAgGM,CAAG;AAhGT,CAAT","file":"defaultPerson.js","sourceRoot":"../../../../assets/script","sourcesContent":["const common = require('./common');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        closeBtn: cc.Node,\n        scaleBtn: cc.Node,\n        frameNode: cc.Node,\n        initScale: {\n            default: 0,\n            type: cc.Float\n        },\n        scaleRadio: {\n            default: 5000,\n            type: cc.Integer\n        },\n        minScale: {\n            default: 0.6,\n            type: cc.Float\n        },\n        maxScale: {\n            default: 1.5,\n            type: cc.Float\n        }\n    },\n\n    // 选中 Node 事件\n    handleRootNodeClick: function () {\n        this.frameNode.active = true;\n        this.node.dispatchEvent(new cc.Event.EventCustom('selectNode', true));\n    },\n\n    // 移除 Node事件    \n    handleRemoveRootNode: function () {\n        let defaultMaleContent = cc.find('Canvas/panel/scrollView/view-male/content'),\n            scrollView = cc.find('Canvas/panel/scrollView');\n        common.hideAllContent();\n        common.unSelectorXIcon();\n        common.selectDefaultMan();\n        common.hideYpanel();\n        defaultMaleContent.active = true;\n        scrollView.getComponent(cc.ScrollView).content = defaultMaleContent;\n        this.node.destroy();\n    },\n\n    onLoad() {\n        this.frameNode.active = false;\n\n        // dragger event\n        this.node.on(cc.Node.EventType.TOUCH_START, function (e) {\n            this.node.setLocalZOrder(++common.personZOrder);\n            this.initScale = e.currentTarget.scaleX;\n            var scale = this.initScale + 0.05;\n            this.node.setScale(scale);\n            this.handleRootNodeClick();\n        }, this)\n\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function (e) {\n            if (e.target === 'scale-btn') {\n                return false;\n            }\n            let delta = e.touch.getDelta();\n            this.x += delta.x;\n            this.y += delta.y;\n        }, this.node)\n\n        this.node.on(cc.Node.EventType.TOUCH_END, function (e) {\n            this.node.setScale(this.initScale);\n        }, this)\n\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (e) {\n            this.node.setScale(this.initScale);\n        }, this)\n\n        // scale event\n        this.scaleBtn.on(cc.Node.EventType.TOUCH_START, function (e) {\n            e.stopPropagation();\n        }, this.node)\n\n        this.scaleBtn.on(cc.Node.EventType.TOUCH_MOVE, function (e) {\n            e.stopPropagation();\n            let scaleRate = (1 - e.getStartLocation().y + e.getLocation().y) / this.scaleRadio;\n            this.initScale = scaleRate + this.initScale;\n            this.initScale = this.initScale < this.minScale ? this.minScale : this.initScale;\n            // this.initScale = this.initScale > this.maxScale ? this.maxScale : this.initScale;\n            this.node.setScale(this.initScale);\n        }, this)\n\n        this.scaleBtn.on(cc.Node.EventType.TOUCH_END, function (e) {\n            e.stopPropagation();\n        }, this)\n\n        this.scaleBtn.on(cc.Node.EventType.TOUCH_CANCEL, function (e) {\n            e.stopPropagation();\n        }, this)\n    },\n\n    update(dt) { },\n});\n"]}