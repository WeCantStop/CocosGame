{"version":3,"sources":["main.js"],"names":["common","require","cc","Class","extends","Component","properties","panelNode","Node","cameraNode","yPanel","defaultManContentNode","hairContentNode","femaleHairContentNode","largeThingContentNode","smallThingContentNode","QRNode","scrollView","countrysNode","default","baxi","deguo","faguo","agengting","wulagui","putaoya","keluodiya","bilishi","xibanya","stageNode","malePrefab","Prefab","malePrefab2","malePrefab3","femalePrefab","femalePrefab2","femalePrefab3","handlePhoto","self","active","removeAllFrame","QRAction","fadeIn","callback","callFunc","getImage","runAction","sequence","_this","document","getElementById","style","background","canvasNode","display","setTimeout","base64","toDataURL","canvas","find","getComponent","Canvas","vsbSize","view","getVisibleSize","designSize","designResolution","scaleW","width","scaleH","height","fitScale","Math","min","gameDiv","bigImg","createElement","id","src","alt","parseInt","replace","position","top","left","appendChild","PubSub","publish","modify","subscribe","fadeOut","selectNodeListener","node","on","event","selectNode","target","name","getChildByName","hideAllContent","ScrollView","content","unSelectorYIcon","unSelectorXIcon","selectHairIcon","selectLargeThing","selectSmallThing","showCurrentCountry","selectedCountry","showCountry","selectCountry","e","country","initContentFlag","initBaxi","initAgengting","initDeguo","initFaguo","initKeluodiya","initXibanya","initBilishi","initPutaoya","createNewPerson","type","prefabType","newPerson","instantiate","setPosition","random0To1","addChild","setLocalZOrder","personZOrder","dispatchEvent","Event","EventCustom","onLoad","selectDefaultMan","EventType","TOUCH_END","hideYpanel","children","forEach","index","color","setColorFunc"],"mappings":"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","file":"main.js","sourceRoot":"../../../../assets/script","sourcesContent":["const common = require('./common');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        panelNode: cc.Node,\n        cameraNode: cc.Node,\n        yPanel: cc.Node,\n        defaultManContentNode: cc.Node,\n        hairContentNode: cc.Node,\n        femaleHairContentNode: cc.Node,\n        largeThingContentNode: cc.Node,\n        smallThingContentNode: cc.Node,\n        QRNode: cc.Node,\n        scrollView: cc.Node,\n\n        countrysNode: cc.Node,\n        default: cc.Node,\n        baxi: cc.Node,\n        deguo: cc.Node,\n        faguo: cc.Node,\n        agengting: cc.Node,\n        wulagui: cc.Node,\n        putaoya: cc.Node,\n        keluodiya: cc.Node,\n        bilishi: cc.Node,\n        xibanya: cc.Node,\n\n        stageNode: cc.Node,\n        malePrefab: cc.Prefab,\n        malePrefab2: cc.Prefab,\n        malePrefab3: cc.Prefab,        \n        femalePrefab: cc.Prefab,\n        femalePrefab2: cc.Prefab,\n        femalePrefab3: cc.Prefab\n    },\n\n    handlePhoto() {\n        let self = this;\n        // 隐藏相关元素\n        this.panelNode.active = false;\n        this.cameraNode.active = false;\n        common.removeAllFrame();\n\n        // let QRAction = cc.moveBy(0.6, 0, 210).easing(cc.easeIn(3.0));\n        let QRAction = cc.fadeIn(1.0);\n        let callback = cc.callFunc(function () {\n            self.getImage();\n        });\n\n        this.QRNode.runAction(cc.sequence(QRAction, callback))\n    },\n\n    getImage() {\n        let _this = this;\n\n        // 截图方案一 (有闪屏)\n        document.getElementById('Cocos2dGameContainer').style.background = '#FFF';\n        var canvasNode = document.getElementById(\"GameCanvas\");\n        canvasNode.style.display = 'none';\n        setTimeout(() => {\n            var base64 = canvasNode.toDataURL(\"image/png\");\n            var canvas = cc.find(\"Canvas\").getComponent(cc.Canvas);\n            var vsbSize = cc.view.getVisibleSize();\n            var designSize = canvas.designResolution;\n            var scaleW = vsbSize.width / designSize.width;\n            var scaleH = vsbSize.height / designSize.height;\n            var fitScale = Math.min(scaleW, scaleH);\n            var gameDiv = document.getElementById('Cocos2dGameContainer');\n            var bigImg = document.createElement(\"img\");\n            bigImg.id = 'share';\n            bigImg.src = base64;\n            bigImg.alt = 'shareImg';\n            bigImg.width = parseInt(gameDiv.style.width.replace(/px/, '')) * fitScale;\n            bigImg.height = parseInt(gameDiv.style.height.replace(/px/, '')) * fitScale;\n            bigImg.style.position = 'absolute';\n            bigImg.style.top = \"0px\";\n            bigImg.style.left = parseInt(gameDiv.style.width.replace(/px/, '')) / 2 - bigImg.width / 2 + \"px\";\n            gameDiv.appendChild(bigImg);\n            // 截完图片 触发事件\n            PubSub.publish('MAKE_IMG_SUCCESS', base64);\n        }, 1)\n\n    },\n\n    modify() {\n        PubSub.subscribe('MAKE_IMG_MODIFY', () => {\n            this.panelNode.active = true;\n            this.cameraNode.active = true;\n            let QRAction = cc.fadeOut(1.0)\n            this.QRNode.runAction(QRAction);\n        })\n    },\n\n    // 选择的节点\n    selectNodeListener: function () {\n        this.node.on('selectNode', function (event) {\n            this.selectNode = event.target;\n            // 选择 男性 女性 物品(大小)\n            if (this.selectNode.name === 'defaultMale') {\n                // 男性\n                if (common.selectNode && common.selectNode.name === 'defaultMale') {\n                    common.removeAllFrame();\n                    event.target.getChildByName('frame').active = true;\n                } else {\n                    common.removeAllFrame();\n                    event.target.getChildByName('frame').active = true;\n                    this.yPanel.active = true;\n                    common.hideAllContent();\n                    this.hairContentNode.active = true;\n                    this.scrollView.getComponent(cc.ScrollView).content = this.hairContentNode;\n                    common.unSelectorYIcon();\n                    common.unSelectorXIcon();\n                    common.selectHairIcon();\n                }\n\n            } else if (this.selectNode.name === 'defaultFemale') {\n                // 女性\n                if (common.selectNode && common.selectNode.name === 'defaultFemale') {\n                    common.removeAllFrame();\n                    event.target.getChildByName('frame').active = true;\n                } else {\n                    common.removeAllFrame();\n                    event.target.getChildByName('frame').active = true;\n                    this.yPanel.active = true;\n                    common.hideAllContent();\n                    this.femaleHairContentNode.active = true;\n                    this.scrollView.getComponent(cc.ScrollView).content = this.femaleHairContentNode;\n                    common.unSelectorYIcon();\n                    common.unSelectorXIcon();\n                    common.selectHairIcon();\n                }\n\n            } else if (this.selectNode.name === 'largeThing') {\n                common.removeAllFrame();\n                event.target.getChildByName('frame').active = true;\n                this.yPanel.active = false;\n                common.unSelectorXIcon();\n                common.selectLargeThing();\n                common.hideAllContent();\n                this.largeThingContentNode.active = true;\n                this.scrollView.getComponent(cc.ScrollView).content = this.largeThingContentNode;\n            } else {\n                common.removeAllFrame();\n                event.target.getChildByName('frame').active = true;\n                this.yPanel.active = false;\n                common.unSelectorXIcon();\n                common.selectSmallThing();\n                common.hideAllContent();\n                this.smallThingContentNode.active = true;\n                this.scrollView.getComponent(cc.ScrollView).content = this.smallThingContentNode;\n            }\n            common.selectNode = this.selectNode;\n        }, this)\n    },\n\n    showCurrentCountry() {\n        common.hideAllContent();\n        this[common.selectedCountry].active = true;\n        this.scrollView.getComponent(cc.ScrollView).content = this[common.selectedCountry];\n    },\n\n    showCountry() {\n        common.hideAllContent();\n        this.countrysNode.active = true;\n        this.scrollView.getComponent(cc.ScrollView).content = this.countrysNode;\n    },\n\n    selectCountry(e, country) {\n        switch (country) {\n            case 'baxi':\n                {\n                    if (!common.initContentFlag.baxi) {\n                        common.initContentFlag.baxi = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initBaxi();\n                    }\n                }\n                break;\n            case 'agengting':\n                {\n                    if (!common.initContentFlag.agengting) {\n                        common.initContentFlag.agengting = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initAgengting();\n                    }\n                }\n                break;\n            case 'deguo':\n                {\n                    if (!common.initContentFlag.deguo) {\n                        common.initContentFlag.deguo = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initDeguo();\n                    }\n                }\n                break;\n            case 'faguo':\n                {\n                    if (!common.initContentFlag.faguo) {\n                        common.initContentFlag.faguo = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initFaguo();\n                    }\n                }\n                break;\n            case 'keluodiya':\n                {\n                    if (!common.initContentFlag.keluodiya) {\n                        common.initContentFlag.keluodiya = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initKeluodiya();\n                    }\n                }\n                break;\n            case 'xibanya':\n                {\n                    if (!common.initContentFlag.xibanya) {\n                        common.initContentFlag.xibanya = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initXibanya();\n                    }\n                }\n                break;\n            case 'bilishi':\n                {\n                    if (!common.initContentFlag.bilishi) {\n                        common.initContentFlag.bilishi = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initBilishi();\n                    }\n                }\n                break;\n            case 'putaoya':\n                {\n                    if (!common.initContentFlag.putaoya) {\n                        common.initContentFlag.putaoya = true;\n                        cc.find('Canvas/itemList').getComponent('itemList').initPutaoya();\n                    }\n                }\n                break;\n        }\n        common.selectedCountry = country;\n        this.showCurrentCountry();\n    },\n\n    // 创建人物\n    createNewPerson(e, type) {\n\n        let prefabType;\n\n        switch(type) {\n            case 'male-01': prefabType = this.malePrefab; break;\n            case 'male-02': prefabType = this.malePrefab2; break;\n            case 'male-03': prefabType = this.malePrefab3; break;\n            case 'female-01': prefabType = this.femalePrefab; break;\n            case 'female-02': prefabType = this.femalePrefab2; break;\n            case 'female-03': prefabType = this.femalePrefab3; break;\n        }\n\n        let newPerson = cc.instantiate(prefabType);\n        // 替换物品\n        // this.replaceClothes(newPerson, type);\n        newPerson.setPosition(this.node.width / 30 + cc.random0To1() * 40 - 20, this.node.height / 10 + cc.random0To1() * 40 - 10);\n        this.stageNode.addChild(newPerson);\n        newPerson.setLocalZOrder(++common.personZOrder);\n        common.removeAllFrame();\n        newPerson.dispatchEvent(new cc.Event.EventCustom('selectNode', true));\n    },\n\n    onLoad() {\n        // 样式上默认选中 male\n        common.selectDefaultMan();\n\n        this.selectNodeListener();\n        // 监听移除frame\n        this.node.getChildByName('background').on(cc.Node.EventType.TOUCH_END, function () {\n            common.removeAllFrame();\n            common.unSelectorXIcon();\n            common.selectDefaultMan();\n            common.hideAllContent();\n            common.hideYpanel();\n            this.defaultManContentNode.active = true;\n            // this.scrollView.getComponent(cc.ScrollView).content = this.defaultManContentNode;\n        }, this)\n\n        // 监听重新编辑按钮点击\n        // this.modify();\n\n        this.countrysNode.children.forEach((country, index) => {\n            country.children[0].color = common.setColorFunc(0, 0, 0);\n        })\n\n\n    }\n});"]}